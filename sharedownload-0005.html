<!DOCTYPE html><html lang="en"><head id="head">    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120519596-1"></script>    <script>        window.dataLayer = window.dataLayer || [];        function gtag() {            dataLayer.push(arguments);        }        gtag('js', new Date());        gtag('config', 'UA-120519596-1');    </script>    <meta charset="utf-8">    <title></title>    <meta name="viewport"          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">    <meta name="applicable-device" content="pc,mobile">    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1"/>    <meta name="apple-mobile-web-app-capable" content="yes">    <meta name="apple-mobile-web-app-status-bar-style" content="black">    <link rel="stylesheet" href="css/reset.css">    <script src="./js/qrcode.js"></script>    <!--<link rel="stylesheet" href="css/app2.css">--></head><style>    .alipay {        background-size: 120px 120px;        background-position: 0 0 !important;        width: 120px;        height: 120px;        padding: 0;        margin: 30px 0 0 30px    }</style><body><div class="main clearfix container">    <textarea id="bar2" style="position: fixed; top: 0;opacity: 0;width: 1px;"></textarea>    <ul class="ul-main">        <li class="logo2"></li>        <li class="bg-text"></li>        <li class="icon-btn" style="text-align: center;width: 100%">            <div id="qrcodex" class="alipay" style="margin-left: 45%;" ></div>        </li>        <li class="icon-btn">            <a id="a_ios" class="inviteHref" data-clipboard-target='#bar'><img src="images/wap-icon-iosmobile.png"/></a>            <a id='a_android' class="inviteHref2" data-clipboard-target='#bar'><img                    src="images/wap-icon-androidmobile.png"/></a>        </li>        <li>            <textarea id="bar" style="position: fixed; top: 0;opacity: 0;width: 1px;"></textarea>            <div class="dialog hide">                <div id="qrcode" class="ewmImg"></div>                +            </div>            <div class="bg_zzc hide"></div>        </li>        <li class="a_downcont">            <a class="a_down" href="javascript:;"><img src="images/arrowdown.png"/></a>        </li>        <li class="ts">            <dl class="ts-dl">                <dt>                    <div></div>                </dt>                <dd></dd>                <dd></dd>            </dl>        </li>        <li class="sm"></li>    </ul>    <img class="btnTop hide" src="images/icon-backTop.png">    <img class="btnDown hide" src="images/icon-down.png"></div></body><script src="js/jquery-3.3.1.min.js"></script><script>    var pagefromid="0005"    var dececie_type = "";    function loadCss(url) {        var addCss = document.createElement("link");        addCss.type = "text/css";        addCss.rel = "stylesheet";        addCss.media = "screen";        addCss.href = url;        document.getElementsByTagName("head")[0].appendChild(addCss);    };    // 判断机型    var qrcode = new QRCode("qrcodex");    var turn_url=window.location.href    var xx=turn_url.replace("share-"+pagefromid,"sharedownload-"+pagefromid)    console.log("turn_url--->"+turn_url);    console.log("xx--->"+xx);    qrcode.makeCode(xx);    function checkPlatForm() {        if ((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) {//手机端            document.documentElement.style.fontSize = document.documentElement.clientWidth / 7.5 + 'px';            document.write('<link href="css/app2mobile.css" rel="stylesheet" type="text/css" media="screen" />');            if (navigator.userAgent.match(/(iPhone)/)) {                if ((screen.availHeight == 812) && (screen.availWidth == 375)) {// iPhone X                    if ((window.innerWidth == "375") && (window.innerHeight == "812")) {// iPhone X Landscape 竖屏                        $('.ewm-tk').css('margin', '2rem auto 1rem');                        $('.bg-text').addClass('bgText');                    } else {// iPhone X Portrait 横屏                    }                } else {// iPhone 其他机型                }                dececie_type="i"                window.open("itms-services://?action=download-manifest&url=https://xy12.app/app/"+pagefromid+"/manifest.plist");                report();            } else {//安卓等其他机型                dececie_type="a"                window.open("http://d.line880.com/down/"+pagefromid+"/avshow-android.apk");                report();            }        } else {//web端            dececie_type="n"            document.write('<link href="css/app2.css" rel="stylesheet" type="text/css" media="screen" />');            // loadCss( "css/pc.css" );            $('body').click(function () {                $('.dialog,.bg_zzc').addClass('hide');            })            $(".a_ios").find("img").attr("src", "images/wap-icon-ios.png");            $(".a_android").find("img").attr("src", "images/wap-icon-android.png");        }    }    //test_access_report()    access_report();    // 判断机型    checkPlatForm();    document.querySelector('#a_ios').addEventListener('click', function () {        window.open("itms-services://?action=download-manifest&url=https://xy12.app/app/"+pagefromid+"/manifest.plist");              report();    });    document.querySelector('#a_android').addEventListener('click', function () {        //testreport()        window.open("http://d.line880.com/down/"+pagefromid+"/avshow-android.apk");            report();    });    function testreport() {        var code_obj={       /*     fromid:"0001",            promotion:0,            inner_net_ip:"192.168.1.7",            deviceType:"a",            invitation_code:'abcsdf'*/            fromid:"0001",            inner_net_ip:"192.168.1.7",            deviceType:"a",            invitation_code:'abcsdf',            promotion:0,            self_promotion:0        };       /* $.post("http://192.168.1.230:8070/api0.1/download_report", code_obj, function (result) {        });*/        $.post("http://api.zxysn.com/api0.1/download_report", code_obj, function (result) {        });    }    function test_access_report() {        var code_obj={            fromid:"0001",            inner_net_ip:"192.168.1.7",            deviceType:"a",            invitation_code:'abcsdf',            promotion:0,            self_promotion:0        };      /*  $.post("http://192.168.1.230:8070/api0.1/access_report", code_obj, function (result) {        });*/        $.post("http://api.zxysn.com/api0.1/access_report", code_obj, function (result) {        });    }    function access_report() {        getIPs(function (ip) {            var code_obj = parseQueryString();            code_obj.inner_net_ip = ip;            code_obj.deviceType = dececie_type;            code_obj.self_promotion = code_obj.promotion;            code_obj.from = code_obj.fromid;            if(code_obj.self_promotion==null)            {                code_obj.self_promotion=1;                document.getElementById("a_ios").style.visibility="hidden";                document.getElementById("a_android").style.visibility="hidden";            }            if(code_obj.fromid==null)            {                document.getElementById("a_ios").style.visibility="hidden";                document.getElementById("a_android").style.visibility="hidden";            }            var jsonform1 = JSON.stringify(code_obj, null, 4)            console.log("access_report------>" + jsonform1);            console.log(ip);            $.post("http://api.zxysn.com/api0.1/access_report", code_obj, function (result) {            });        });    }    function report() {        getIPs(function (ip) {            var code_obj = parseQueryString();            code_obj.inner_net_ip = ip;            code_obj.deviceType = dececie_type;            code_obj.self_promotion = code_obj.promotion;            code_obj.from = code_obj.fromid;            if(code_obj.self_promotion==null)            {                code_obj.self_promotion=1;            }            var jsonform1 = JSON.stringify(code_obj, null, 4)            console.log("code_obj------>" + jsonform1);            console.log(ip);            $.post("http://api.zxysn.com/api0.1/download_report", code_obj, function (result) {            });        });    }    function parseQueryString () {        var url=window.location.href        var reg_url = /^[^\?]+\?([\w\W]+)$/, reg_para = /([^&=]+)=([\w\W]*?)(&|$|#)/g, arr_url = reg_url.exec(url),            ret = {};        if (arr_url && arr_url[1]) {            var str_para = arr_url[1], result;            while ((result = reg_para.exec(str_para)) != null) {                ret[result[1]] = result[2];            }        }        return ret;    }    var cookie = {        set: function (key, val, time) {//设置cookie方法            var date = new Date(); //获取当前时间            var expiresDays = time;  //将date设置为n天以后的时间            date.setTime(date.getTime() + expiresDays * 24 * 3600 * 1000); //格式化为cookie识别的时间            document.cookie = key + "=" + val + ";expires=" + date.toGMTString();  //设置cookie        },        get: function (key) {//获取cookie方法            /*获取cookie参数*/            var getCookie = document.cookie.replace(/[ ]/g, "");  //获取cookie，并且将获得的cookie格式化，去掉空格字符            var arrCookie = getCookie.split(";")  //将获得的cookie以"分号"为标识 将cookie保存到arrCookie的数组中            var tips;  //声明变量tips            for (var i = 0; i < arrCookie.length; i++) {   //使用for循环查找cookie中的tips变量                var arr = arrCookie[i].split("=");   //将单条cookie用"等号"为标识，将单条cookie保存为arr数组                if (key == arr[0]) {  //匹配变量名称，其中arr[0]是指的cookie名称，如果该条变量为tips则执行判断语句中的赋值操作                    tips = arr[1];   //将cookie的值赋给变量tips                    break;   //终止for循环遍历                }            }            return tips;        },        delete: function (key) { //删除cookie方法            var date = new Date(); //获取当前时间            date.setTime(date.getTime() - 10000); //将date设置为过去的时间            document.cookie = key + "=v; expires =" + date.toGMTString();//设置cookie        }    }    //get the IP addresses associated with an account    function getIPs(callback) {        var ip_dups = {};        //compatibility for firefox and chrome        var RTCPeerConnection = window.RTCPeerConnection            || window.mozRTCPeerConnection            || window.webkitRTCPeerConnection;        //bypass naive webrtc blocking        if (!RTCPeerConnection) {            var iframe = document.createElement('iframe');            //invalidate content script            iframe.sandbox = 'allow-same-origin';            iframe.style.display = 'none';            document.body.appendChild(iframe);            var win = iframe.contentWindow;            window.RTCPeerConnection = win.RTCPeerConnection;            window.mozRTCPeerConnection = win.mozRTCPeerConnection;            window.webkitRTCPeerConnection = win.webkitRTCPeerConnection;            RTCPeerConnection = window.RTCPeerConnection                || window.mozRTCPeerConnection                || window.webkitRTCPeerConnection;        }        //minimal requirements for data connection        var mediaConstraints = {            optional: [{RtpDataChannels: true}]        };        //firefox already has a default stun server in about:config        //    media.peerconnection.default_iceservers =        //    [{"url": "stun:stun.services.mozilla.com"}]        var servers = undefined;        //add same stun server for chrome        if (window.webkitRTCPeerConnection)            servers = {iceServers: [{urls: "stun:stun.services.mozilla.com"}]};        //construct a new RTCPeerConnection        var pc = new RTCPeerConnection(servers, mediaConstraints);        //listen for candidate events        pc.onicecandidate = function (ice) {            //skip non-candidate events            if (ice.candidate) {                //match just the IP address                var ip_regex = /([0-9]{1,3}(\.[0-9]{1,3}){3})/                var ip_addr = ip_regex.exec(ice.candidate.candidate)[1];                //remove duplicates                if (ip_dups[ip_addr] === undefined)                    callback(ip_addr);                ip_dups[ip_addr] = true;            }        };        //create a bogus data channel        pc.createDataChannel("");        //create an offer sdp        pc.createOffer(function (result) {            //trigger the stun server request            pc.setLocalDescription(result, function () {            }, function () {            });        }, function () {        });    }</script><!--<script src="js/clipboard.min.js"></script><script src="js/qrcode.min.js"></script><script src="js/constant.js"></script><script src="js/app.js"></script>--></html>